---
title:  "Microservice Database API Development"
layout: post
---

![DB](https://github.com/HongchaoHu/HongchaoHu.github.io/blob/master/assets/Microservice_API.jpg?raw=true)
Microservice Database API Development


# **Search & Filter Database Miroservice API**

This project builds backend APIs for **product search and filtering**, decoupling data retrieval from legacy dependencies. Using **MySQL** and BPMN-documented flows, the architecture ensures low latency (≤300 ms P50), real-time inventory joins, and responsive filtering.  

## 1. **Business Requirements and Scope**
The **BRD** defined key goals:contentReference[oaicite:0]{index=0}:  

- Enable **keyword and attribute search** (BR-1).  
- Provide **multi-facet filters** like price, color, rating (BR-2).  
- Integrate **real-time inventory status** (BR-3).  
- Maintain modular APIs with **BPMN traceability** (BR-4).  
- Reduce **third-party API reliance** by ≥20% (BR-5).  
- Expose **analytics events** for usage monitoring (BR-6).  
<br>
Success metrics include ≤300 ms median latency, <5% zero-result rate, and 99.95% uptime. 

![encrtpP](https://github.com/HongchaoHu/HongchaoHu.github.io/blob/master/assets/encryptP.jpg?raw=true)

## 2. **Architecture and Process Flow**

The APIs run as independent microservices:

- **search-service**  
- **filter-service**  
- **indexer-service**  

Each service is backed by a dedicated **MySQL schema**. An **API Gateway** manages routing, authentication, and observability.

**BPMN workflow:**

**Steps:**
1. Request validated at front end  
2. Search plan built  
3. Query split across **Catalog DB** and **Inventory DB**  
4. Results joined, ranked, and paginated  
5. Response returned with product list + facets  


![dataIlu](https://github.com/HongchaoHu/HongchaoHu.github.io/blob/master/assets/dataIlu.jpg?raw=true)

```Python
# Encrypt data with AES-CBC and return ciphertext and HMAC
# Import Crypto Modules...
def encrypt_data(data, key):
    hmac_key = key[:16]  # First half of the key for HMAC
    enc_key = key[16:]  # Second half of the key for encryption
    
    iv = get_random_bytes(16)
    cipher = AES.new(enc_key, AES.MODE_CBC, iv)
    encrypted = cipher.encrypt(pad(data.encode(), 16))
    
    # Calculate HMAC for encrypted data and append it
    hmac = HMAC.new(hmac_key, encrypted, digestmod=SHA256).digest()
    return base64.b64encode(iv + encrypted + hmac)
```


![encrtpP](https://github.com/HongchaoHu/HongchaoHu.github.io/blob/master/assets/encryptP.jpg?raw=true)

## 3. **Sequence of API Calls**

The sequence diagram captures runtime interactions:

**Flow highlights:**
1. Client issues `search?q=...`  
2. API Gateway forwards with authentication context  
3. Search API requests facets and filters  
4. Catalog DB returns product documents; Inventory DB supplies stock snapshot  
5. Backend aggregates, ranks, and paginates  
6. System returns **200 OK** with results and emits analytics events  


```Python
decrypted_data = decrypt_data(encrypted_data, key)
    json_data = json.loads(decrypted_data)
    
    tables = json_to_table(json_data)
    
    for table_name, table_data in tables.items():
        print(f"Table: {table_name}")
        display(table_data)
```

## 4. **BDD Scenarios and Use Cases**

**Core scenarios:**
- Valid search → 200 OK with product list  
- Apply filters → 200 OK with narrowed results  
- Inventory integration → products flagged in-stock / out-of-stock  
- Error handling → 400 for missing/invalid input, 503 for database unavailable  

**Use Case Summary:**  
Customers initiate a product search or apply filters. The system retrieves data from the Catalog DB, joins with Inventory data, ranks results, and returns them in real time. Analytics logs are generated for each interaction.  

<br>

## 5. **Results and Applications**

**Outcomes:**  
- Faster product discovery with low-latency APIs  
- Reduced reliance on external vendors  
- BPMN-documented pipelines for clarity and traceability  
- Real-time inventory awareness for accurate results  

**Applications:**  
- E-commerce platforms requiring scalable product search  
- Retailers needing real-time inventory synchronization  
- Analytics teams analyzing search and filter usage events

<br>
Please feel free to [contact me](mailto:jason.hu168@outlook.com) if you would like to learn more about this exciting project or if you have any inquiries related to my skills and experience.
