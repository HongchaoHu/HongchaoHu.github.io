---
title:  "Microservice Database API Development"
layout: post
---

![DB](https://github.com/HongchaoHu/HongchaoHu.github.io/blob/master/assets/Microservice_API.jpg?raw=true)
Microservice Database API Development



# **Search & Filter Database Microservice API**

In modern e-commerce, product discovery often struggles with slow response times, incomplete search results, and inaccurate inventory visibility. Traditional monolithic systems or external search vendors contribute to these challenges by introducing latency, driving up costs, and limiting flexibility. As product catalogs expand and customer expectations grow, the need for a fast, scalable, and transparent solution becomes increasingly critical.  

This project delivers that solution through a **microservice-based Search & Filter API** powered by **MySQL** and modeled with **BPMN workflows**. The architecture separates functionality into three independent services—**search**, **filter**, and **indexer**—all managed through an API gateway that enforces routing, authentication, and observability. These services support keyword and attribute-based queries, enable multi-facet filtering on attributes such as price, color, and rating, and integrate directly with inventory data to provide real-time stock visibility. By ensuring every result is timely and accurate, the system minimizes customer frustration and strengthens trust in the platform.  

To guarantee robustness, the project applies **behavior-driven development (BDD)** scenarios and detailed use cases, covering both success paths and error conditions such as missing input, invalid formats, or database unavailability. This disciplined approach ensures that the APIs remain reliable under diverse circumstances and provide clear feedback when issues occur.  

The impact is measurable. Customers benefit from a seamless discovery process that increases satisfaction and boosts conversion rates. Businesses reduce reliance on costly third-party search services by at least 20%, cutting expenses while gaining greater ownership and flexibility over critical functionality. In addition, the APIs emit structured analytics events, giving stakeholders actionable insights into customer behavior. These insights can drive data-informed improvements in marketing, inventory management, and product strategy.  

By combining scalability, speed, and clarity, this project demonstrates how microservice-driven architecture can transform the search and filter experience for both customers and businesses, delivering lasting value across the entire e-commerce ecosystem.  <br>

<br>
<br> 

## 1. **Business/Functional Requirements and Scope**
The **BRD** defined key goals:contentReference[oaicite:0]{index=0}:  

**BR-1** (**Keyword and attribute search**) together with **BR-2** (**multi-facet filters**) ensures customers can quickly narrow down to the exact products they want, improving conversion rates and driving higher engagement. When paired with **BR-3** (**real-time inventory integration**), the platform delivers accurate stock visibility, reducing customer frustration and aligning demand with supply. These combined features not only streamline the user journey but also build trust by ensuring fast, relevant, and reliable search results.  

**BR-4** (**Modular APIs with BPMN traceability**) guarantees scalability and transparency, making it easier to extend or troubleshoot the system. **BR-5** (**reduced third-party API reliance by ≥20%**) directly cuts operational costs while strengthening ownership of core capabilities. Finally, **BR-6** (**analytics event exposure**) provides stakeholders with deep insights into search and filter behavior, enabling smarter product strategies, targeted marketing, and continuous optimization of the customer experience.  


<br>
**BRD/FSD Snippet:**

![encrtpP](https://github.com/HongchaoHu/HongchaoHu.github.io/blob/master/assets/FSD_Example.jpg?raw=true)

<br>


## 2. **Architecture and Process Flow**

The APIs run as independent microservices:

- **search-service**  
- **filter-service**  
- **indexer-service**  

Each service is backed by a dedicated **MySQL schema**. An **API Gateway** manages routing, authentication, and observability.

**BPMN workflow:**

**Steps:**
1. Request validated at the front end  
2. Search plan built  
3. Query split across **Catalog DB** and **Inventory DB**  
4. Results joined, ranked, and paginated  
5. Response returned with product list + facets  

<br>

![encrtpP](https://github.com/HongchaoHu/HongchaoHu.github.io/blob/master/assets/Sequence_SearchFilter.jpg?raw=true)

<br>

**Configuration snippet:**
```yaml
services:
  search-service:
    db_schema: catalog_search
  filter-service:
    db_schema: product_filters
  indexer-service:
    db_schema: ingestion_index
gateway:
  auth: bearer-jwt
  observability: prometheus + structured logs
```

## 3. **Sequence of API Calls**

The sequence diagram captures runtime interactions:

**Flow highlights:**
1. Client issues `search?q=...`  
2. API Gateway forwards with the authentication context  
3. Search API requests facets and filters  
4. Catalog DB returns product documents; Inventory DB supplies stock snapshot  
5. Backend aggregates, ranks, and paginates  
6. System returns **200 OK** with results and emits analytics events  

<br>

![encrtpP](https://github.com/HongchaoHu/HongchaoHu.github.io/blob/master/assets/Sequence_SearchFilter.jpg?raw=true)

<br>

**Example request/response demonstration:**
```bash
# Example request
curl -sS "https://api.example.com/v1/search?q=running+shoes&sort=price&page=1" \
  -H "Authorization: Bearer <token>"
```



## 4. **BDD Scenarios and Use Cases**

**Core scenarios:**
- Valid search → 200 OK with product list  
- Apply filters → 200 OK with narrowed results  
- Inventory integration → products flagged in-stock / out-of-stock  
- Error handling → 400 for missing/invalid input, 503 for database unavailable

<br>

**Core scenarios:**
```gherkin
Feature: Product Search Microservice API

Scenario: Search API returns results
  GIVEN the client invokes the Search API with a valid keyword
  WHEN the backend processes the query
  THEN the API should return http status code 200
  AND the system should return the list of matching products

Scenario: Filter API applies selected filters
  GIVEN the client provides valid filter parameters
  WHEN the backend applies these filters
  THEN the API should return http status code 200
  AND the system should return only products matching the filters
 ```

**Use Case Snippet:**  

<br>

![encrtpP](https://github.com/HongchaoHu/HongchaoHu.github.io/blob/master/assets/User_Case_Example.jpg?raw=true)

<br>

Customers initiate a product search or apply filters. The system retrieves data from the Catalog DB, joins with Inventory data, ranks results, and returns them in real time. Analytics logs are generated for each interaction.  

<br>

## 5. **MySQL Implementation**



## 6. **Results and Applications**

**Outcomes:**  
- Faster product discovery with low-latency APIs  
- Reduced reliance on external vendors  
- BPMN-documented pipelines for clarity and traceability  
- Real-time inventory awareness for accurate results  

**Applications:**  
- E-commerce platforms requiring scalable product search  
- Retailers needing real-time inventory synchronization  
- Analytics teams analyzing search and filter usage events

<br>
Please feel free to [contact me](mailto:jason.hu168@outlook.com) if you would like to share improvement advice or reflection about this exciting project, or if you have any inquiries related to my skills and experience.
